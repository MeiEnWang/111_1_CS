# **計概實習課筆記**

同步更新步驟：
1. git fetch（抓取雲端資料）
2. git diff origin/main（查看不同之處）
3. git pull（同步更新）
-------------------------------------------
### 【Linux指令】
- cd：變更目錄
-	pwd：顯示目前所在目錄的位置
-	ls：顯示目錄下的所有檔案
-	ls -l：顯示目錄下所有檔案的詳細資訊
-	ls -al：顯示幕錄下所有檔案（包含隱藏檔）的詳細資訊
-	touch：建立空白檔案
    - touch filename
-	cp：複製檔案
    - cp -參數 來源檔案 目標檔案
    - 參數：
        - -p：將檔案本身屬性（權限、所有者、時間）同時複製過去（一般用於備份居多）
        - -r：針對目錄下檔案做遞歸複製（整個目錄下每一個檔案複製到你想要的位置）
        - 例：cp -r dir1 dir2
-	cat：印出檔案內容
    - cat filename
    - cat file1 file2：將文件內容串接後顯示
-	echo：印出文字
    - 例：echo “text”
    - echo “text” >> filename　／　echo “text” > filename（將文字寫入filename）
    - \>：覆蓋原有內容
    - \>>：追加內容，不覆蓋繼續寫
-	vi / vim：編輯文檔（後者相當於升級版）
    - 一般模式：可使用上下左右進行游標移動
    - 編輯模式：編輯文字、刪除字元及複製貼上檔案資料
        - :w = 存檔
        - :q = 離開
        - :q! = 強制離開不存檔
        - :wq = 存檔後離開
        - :w[filename] = 另存新檔
        - :r[filename] = 在編輯的資料中讀入另一個檔案的資料
        - :n1,n2 w[filename] = 將n1到n2的內容儲存成filename這個檔案
    - 一般模式 -> 編輯模式：ESC 或 Ctrl + [
    - 編輯模式 -> 一般模式：
        - i = insert
        - a = append
        - o = new line
-	mkdir：建立一個新目錄
-	mkdir -p：同時建立多個目錄
-	rmdir：刪除一個空目錄
-	rm：刪除檔案
-	rm -r：強制刪除
-	mv：移動、重新命名
-	chown：修改檔案或目錄的擁有者及群組
-	chmod：更改使用者權限
    - chomd [擁有者權限][群組權限][其他人權限] filename
    - 例1：
        - chomd 755 testfile
        - 755：[4+2+1][4+1][4+1]
    - 例2：
        - chomd u=rxw,g=rx,o=rx testfile
        - chomd o+w testfile
        - chomd a-x testfile
        - u=user 擁有者
        - g=group 群組
        - o=other 其他人
        - a=all 全部人
-	nano：編輯文檔
    - Ctrl + C：顯示游標所在
    - Ctrl + W：查詢命令，按下後會跳轉到末行的反白位置，輸入要查詢的內容再按 enter 即可
-	壓縮檔案：
    - gzip
        - 壓縮：gzip Filename
        - 解壓縮：
            - gunzip FileName.gz
            - gzip -d FileName.gz
    - xz
        - 壓縮：xz -z FileName
        - 解壓縮：xz -d FileName.xz
    - tar.gz
         - 壓縮：tar -zcvf FileName.tar.gz DirName
         - 解壓縮：tar -zxvf FileName.tar.gz
-	檔案搜尋：
    - find [path] [option] [action] filename
        - option：
          - -size
                - 例：-size +500M（找出大於500M的檔案）
          - -name
                - 例：-name “.jpg”（找出照片檔）
          - -type
               - 例1：-type f（一般檔案）
               - 例2：-type d（一般目錄）
          - -user
                - 例：-user user1 -o -user user2（同時找兩個擁有者的檔案）
    - which filename
        - -a：系統會顯示所有被找到的命令執行檔之完整路徑
        - -n<文件名長度>：指定文件名長度，指定的長度必須大於或等於所有文件中最常的文件名
        - -p<文件名長度>：與-n參數相同，但此處的<文件名長度>包含文件的路徑
        - -w：指定輸出欄位的寬度
        - -V：顯示版本訊息
-------------------------------------------
### 【目錄】
-	. ：此層目錄
-	.. ：上一層目錄
-	- ：前一個工作目錄
-	~ ：「目前使用者身分」的家目錄
-------------------------------------------
### 【目錄權限】
-	權限設定（drwx）：目錄 / 可讀取 / 可寫入 / 可執行
-	顯示順序：user（擁有者）/ group（群組）/ other
-	r：4
-   w：2
-   x：1
-------------------------------------------
### 【正則表達式 特殊符號】
-	^ ：搜尋規則前的開頭
-	$ ：搜尋規則前的結尾
-	. ：任意一個字元
-	\* ：任意字元或字串、單一字元或群組出現任意次數
-	.* ：一起使用代表任意字串
-	\+ ：單一字元或群組至少出現一次
-	? ：單一字元或群組至少出現0或1次
-	{n,m} ：比對前一個字元至少n次，最多m次，nm皆為正整數
    - 例：’a{3,6}’ 為三到六個 ’a’
-	() ：把想找的相關字詞放入括號內，可依照括號內的字元排序找到可能的結果
    - 例：(sym) -> sympathy、symbol、assym等
-	[] ：比對範圍內的字元或字串
    - 例：’[a-z]’ 為所有英文字母小寫
-	[^] ：比對不在指定範圍內的字元
-	[-] ：範圍
-	\ ：將任何特殊字元恢復成一般字元
-------------------------------------------
### 【正則表達式 特定字元】
-	\d ：數字（例：123）
-	\D ：非數字（例：abc或ABC）
-	\w ：數字、字母、底線（例：yes_123或YES123_）
-	\W ：非\w（例：， 或 、 或 -）
-	\s ：空白字元
-	\S ：非空白字元（例：123 或 yes123_ 或 ，）
-------------------------------------------
### 【文字處理工具】
- grep：可從資料或檔案中，使用關鍵字或正規表達法（Regex）找出想要的內容
    - grep[option] filename
    - 參數：
        - -i：忽略大小寫
        - -n：顯示匹配行及行號
        - -r：顯示匹配文字的檔案路徑
        - -c：只輸出匹配行的計數
        - -v：只列出不符合的內容
        - --color=never|always|auto：顏色標示
    - grep + 正則表達式：
        - 開頭結尾
            - a開頭：ls|grep "^a"
            - a或b結尾：ls|grep "[ab]$"
        - 出現次數
            - a開頭，出現0次以上：ls|grep "$a*"
            - a開頭，出現0次或1次：ls|grep "^a?"
            - a開頭，出現1次以上：ls|grep "^a+"
        - 多種組合
            - 含有ab或cd：ls|grep "ab\|cd"
            - 含有ab開頭或cd結尾：ls|grep "^ab\|cd$"
- wc：計算指定檔案內容的換行數、字數與位元組數
    - wc[option] filename
    - 參數：
        - -l：只計算換行數
        - -w：只計算字數
        - -c：只計算位元組數
        - -m：只計算字元數
        - -L：計算最長行的長度
- cut：逐行擷取部分字元或欄位資料
    - cut[option] filename
        - -b：輸出的指定範圍以bytes作為單位
        - -c：輸出的指定範圍以字元數量作為單位
        - -d：指定分隔字元，default為tab作為分隔
        - -f：輸出的指定範圍（每筆data的第幾column作為區分）
        - -s：若該行無分隔字元則不顯示
- paste：將每個文件以列對列的方式進行合併
    - paste[option] filename
    - -s：合併為多行呈現
- diff：比較文件的內容，特別是兩版本不同的同份文件
    - diff[option] filename1 filename2
    - 參數：
        - -y：以並列方式顯示文件的異同之處
        - -W：使用 -y 參數時，指定欄寬
        - -C：前後輸出格式
        - -u：統一格式輸出
- sort：處理文字的排序問題
    - sort[option] filename
    - 參數：
        - -f：忽略大小寫
        - -u：去除重複資料
        - -r：反向排序
        - -t：指定欄位的分隔字元（default=blank or tab）
        - -k：指定欄位的編號
        - -n：依照實際數值的大小排序
        - -h：對有單位的數值排序
        - -M：依照月份排序
- uniq：將連續重複文字刪除
    - uniq[option] filename
    - 參數：
        - -c：計算文字行重複次數
        - -d：將重複行刪掉
        - -u：只輸出沒有重複的文字行
        - -f：指定要跳過的欄位
        - -s：跳過每一行開頭幾個字元
        - -w：只比較每一行開頭幾個字元
        - -i：忽略大小寫
- tr：字串替換或刪除
    - tr[option] set1 set2
    - 參數：
        - -c：用set1中字符集的補集替換此字符集
        - -d：刪除檔案中所有在set1中出現的字元
        - -s：刪除檔案中重複且set1中出現的字元，只保留一個
- join：將兩個文件中，指定欄位內容相同的行連接起來
    - join[option] filename1 filename2
    - -1：連接filename1指定的欄位
    - -2：連接filename2指定的欄位
    - -t：使用欄位的分隔符號
    - -i：忽略大小寫
    - -o：按指定的格式顯示結果
    - -a：除顯示結果，原檔案的其他行也顯示
-------------------------------------------
### 【文字分析工具】
- awk：
    1. 常用在對文字和資料進行分析處理
    2. 檔案逐行的讀入
    - awk [options] 'scripts' var=value filename
    - 常用參數：
        - -F：指定分隔符（可以是字串或正規表達法），預設是空白（space）
        - -f：從指令碼檔案（awk script）中讀取 awk 命令
        - -v：var=value 賦值變數，將外部變數遞給 awk
        - 例：
            - awk -F "\tab" '{print $0}' fruit.txt
            - awk '{print $1, $2, $4}' fruit.txt
            - 參數：
                - $0：當前 record（列、橫行）
                - $1～$n：當前 record 的第 N 個欄位
                - FS：輸入 field 直欄分隔符（-F相同作用）預設空格
                - RS：輸入 record（列、橫行）分割符，預設換行符
                - NF：欄位個數
                - NR：record 數（行號），預設從 1 開始
                - OFS：輸出欄位分隔符，預設空格
                - ORS：輸出 record 分割符，預設換行符
    - awk 'BEGIN{print "start"} pattern{commands} END{print "end"}' filename
        - 第一步執行 BEGIN 語句
            - 主要目的是用來更改一些預設的設定，如：FS（輸入行的欄位分割符號），RS（輸入行的換行分割符號）...等等，以及讀取命令行的參數
        - 第二步從檔案或標準輸入讀取一行，然後再執行 pattern 語句，逐行掃描檔案直至檔案全部被讀取
            - 被執行的次數是依據被讀取文字輸入檔有多少行來決定，一般都是在這區塊做資料的判斷統計，可以在 pattern 中加入一些判斷式，來決定要不要執行 action
        - 第三步執行 END 語句
            - 輸出統計完的結果（存到檔案，或是傳到標準輸出）
    - awk 算數運算子：
        - awk '$2 + $3 >= 160 {print $0}' filename
        - operator：
            - \+
            - \-
            - \*
            - /
            - %：整除
            - ^：指數
    - awk 關係運算子：
        - awk '{if ($3 == 120) print $0}' filename
        - operator：
            - <
            - <=
            - ==
            - !=
            - \>
            - \>=
    - awk 邏輯運算子：
        - awk '($2 > 6) && ($3 >= 150) {print $0}' filename
        - operator：
            - &&：and 的意思
            - ||：or 的意思
    - awk 正則運算子：
        - awk '{if ($3 ~ /0/) print $0}' filename
        - operator：
            - ~：Matched by reg exp
            - !~：Not matched by req exp
    - awk 賦值運算子：
        - awk '{for (j=1; j <= NF; j++) { print $j }}' filename
        - operator：
            - =
            - ++：每次加 1
            - --：每次減 1
            - +=
            - -=
            - *=
            - /=
            - %=
            - ^=
- sed：
    1. 「stream editor」的縮寫，顧名思義是進行串流 (stream) 的編輯
    2. 字串取代、複製、刪除的功能
    3. 自動化的修改文字檔
    - sed [option] '[n1,n2] [command] / [pattern] / [replacement] / [flag]' file.txt
        - option：以 - 符號開頭的功能，如：-n、-r、-i，皆可省略
        - n1, n2：代表開始行數和結尾行數，不輸入代表每行都會執行 command
        - command：進行的動作，如：s, a, c, d, i
        - pattern：給 command 使用的參數
        - replacement：當使用 s 指令時會使用
        - flag：當使用 s 指令時會使用
    - sed [-nefi] '[n1,n2] [command] / [pattern] / [replacement] / [flag]' file.txt
        - option：
            - -n：沉默模式，只有經過 sed 處理的那行才會被印出
            - -e：直接在命令模式編輯，預設
            - -f：直接將 sed 動作寫在一個檔案內，-f file 會直接執行 file 裡面的動作
            - -i：修改檔案
        - command：
            - a：新增，在下一行插入字串，未指定行數的話，則是在每一行之後插入字串
            - c：取代，取代指定行數的內容
            - d：刪除，後面通常不接任何東西
            - i：插入，在指定行數的前一行插入字串
            - p：印出，只印出受影響的行，常搭配 -n 使用
            - s：搜尋、取代，最常用的指令，可搭配正規表達式使用，將搜尋的內容進行取代
        - flag：
            - g：全部取代
            - [0-9]：每行第幾次出現
            - I：忽略大小寫
            - w：把符合的結果寫入檔案

> Grep、Awk、Sed 比較
- grep：文字處理&搜尋工具
    - 可用正規表達法，找出匹配的內容
- awk：文字分析工具
    - 逐行的讀入，可搭配正規表達法
    - 主要用在對文字和資料進行分析處理，以空格為預設分隔符號
    - 同時也是程式語言
    - 用於處理有欄位規則的行內內容，並支援格式化輸出
- sed：一種線上編輯器
    - 一次處理一行內容，可搭配正規表達法
    - 主要用來自動編輯一個或多個檔案，簡化對檔案的反覆操作
    - 用於行間的內容操作，如新增、刪除、修改、查詢、替換
